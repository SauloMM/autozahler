<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>line chart</title>
	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>
	<script>
		//draw header
		function dh(ds){
			d3.select("body").append("h1").text(ds.category)
		}
		//draw line
		function dl(ds){
			var lne = d3.svg.line()
				.x(function(d){return (d.month - 20180000)/3.5})
				.y(function(d){return 100 - d.sales})
				.interpolate("linear")

			var svg = d3.select("body").append("svg").attr({width:500,height:100})

			svg.append("path")
				.attr({
					d:lne(ds.monthlySales),
					"stroke": "blue",
					"stroke-width":2,
					"fill": "none"
				})
		}

		d3.json("m.json",function(error,data){
			if(error){console.log(error)}
			else{console.log(data)}
			data.contents.forEach(function(ds){
				dh(ds);
				dl(ds);
			})
		})

	</script>
</body>
</html>